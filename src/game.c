#include "../include/newTypes.h"
#include "../include/msxSystemVars.h"
#include "../include/msxBIOS.h"
#include "../include/VDP_TMS9918A.h"
#include "joystick_MSXROM.c"
#include "VDP_SPRITES_S_MSXROM.c"
#include "VDP_PRINT.c"


#define  HALT __asm halt __endasm   //wait for the next interrupt

//  definition of functions  ---------------------------------------------------
void WAIT(uint cicles);
void LOCATE(char x, char y);
char PEEK(uint address);
void POKE(uint address, char value);
void CLS();
void VPRINT(char column, char line, char* text);  //print in screen 1 or 2
void VPOKEARRAY(uint vaddr, char* text);
void VPRINTNUMBER(char column, char line, char pLength, uint pNumber);
void printTrig(signed char value);


void DRUGS();
void COST(char column, int barrio);
void BARRIO();
void STOCK();
void VIAJAR();
void COMERCIAR();
void PRECIOS(char column, int barrio);
char getR();

// constants  ------------------------------------------------------------------
const char bars[][15] = {"Baraka","Lutxana","Leioa","Erandio","Lekeitio","Oslo"};
const char drugs[][15] = {"Pegamento","Kifi","Hachis","Marihuana","Cocaina","MDMA", "LSD", "Kriptonita"};
const char posX[]={0x15,0x6C,0xAC};
const char posY[]={0x1E,0x26,0x2E,0x36,0x3E,0x46,0x4E,0x56,};

const int disp[][8] = {
  { 9, 12, 18, 30,105, 280, 1010, 2100},
  { 11, 14, 19, 32,95, 310, 1050, 2050},
  { 10, 15, 18, 35,105, 290, 1080, 1990},
  { 10, 12, 21, 33,100, 305, 1030, 2030},
  { 8, 13, 20, 28,90, 310, 1020, 1980},
  { 10, 20, 19, 40,100, 300, 1000, 1950}
  };
const int precioVAR[] = { 1,2, 3, 5, 10, 15, 20, 50};

static unsigned long int next;

//  definition of variables  ---------------------------------------------------

int CURSOR = 0;
int r = 1;
int stock[] = { 0, 0, 0, 0, 0, 0, 0, 0};
int camello[] = { 0, 0, 0, 0, 0, 0, 0, 0};
int precioTEMP[] = { 0, 0, 0, 0, 0, 0, 0, 0};
int precioBARRIO[] = { 0, 0, 0, 0, 0, 0, 0, 0};

int dia = 31;
int dinero = 3000;
int deuda = 3000;
int bar = 0;
char SEED;
int a = 0;
char b = 0;


const unsigned char TILESET_FONT[]={
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,0xff, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f,0x0, 0x0, 0x0, 0xff, 0xff, 0xff, 0x0, 0x0,
0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf,0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf,
0xf, 0xf, 0xf, 0xff, 0xff, 0xff, 0xf, 0xf,0x0, 0x0, 0x0, 0x0, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0x0, 0x0, 0x0, 0x0,0x0, 0x0, 0x0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0,
0x0, 0x0, 0x0, 0x38, 0x38, 0x38, 0x38, 0x38,0x0, 0x0, 0x0, 0xa, 0xe, 0xe, 0xe, 0xe,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf,
0x0, 0xf0, 0xf0, 0xfe, 0xfe, 0xfe, 0xf0, 0xf0,0x0, 0x0, 0x0, 0x0, 0xff, 0x0, 0x0, 0x0,
0x10, 0x10, 0x10, 0x7c, 0x10, 0x10, 0x10, 0x10,0x10, 0x10, 0x10, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0x10, 0x10, 0x10, 0x10,0x10, 0x10, 0x10, 0xf0, 0x10, 0x10, 0x10, 0x10,
0x10, 0x10, 0x10, 0x1f, 0x10, 0x10, 0x10, 0x10,0x10, 0x10, 0x10, 0xff, 0x10, 0x10, 0x10, 0x10,
0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10,0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0x1f, 0x10, 0x10, 0x10, 0x10,0xff, 0xff, 0xff, 0xf0, 0x10, 0x10, 0x10, 0x10,
0x10, 0x10, 0x10, 0x1f, 0xff, 0xff, 0xff, 0xff,0x10, 0x10, 0x10, 0xf0, 0xff, 0xff, 0xff, 0xff,
0x81, 0x42, 0x24, 0x18, 0x18, 0x24, 0x42, 0x81,0x1, 0x2, 0x4, 0x8, 0x10, 0x20, 0x40, 0x80,
0x80, 0x40, 0x20, 0x10, 0x8, 0x4, 0x2, 0x1,0xff, 0x10, 0x10, 0xff, 0x10, 0x10, 0xff, 0xff,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,0x20, 0x20, 0x20, 0x20, 0x0, 0x0, 0x20, 0x0,
0x50, 0x50, 0x50, 0x0, 0x0, 0x0, 0x0, 0x0,0x50, 0x50, 0xf8, 0x50, 0xf8, 0x50, 0x50, 0x0,
0x20, 0x78, 0xa0, 0x70, 0x28, 0xf0, 0x20, 0x0,0xc0, 0xc8, 0x10, 0x20, 0x40, 0x98, 0x18, 0x0,
0x40, 0xa0, 0x40, 0xa8, 0x90, 0x98, 0x60, 0x0,0x10, 0x20, 0x40, 0x0, 0x0, 0x0, 0x0, 0x0,
0x10, 0x20, 0x40, 0x40, 0x40, 0x20, 0x10, 0x0,0x40, 0x20, 0x10, 0x10, 0x10, 0x20, 0x40, 0x0,
0x20, 0xa8, 0x70, 0x20, 0x70, 0xa8, 0x20, 0x0,0x0, 0x20, 0x20, 0xf8, 0x20, 0x20, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0x20, 0x20, 0x40,0x0, 0x0, 0x0, 0x78, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0x60, 0x60, 0x0,0x0, 0x0, 0x8, 0x10, 0x20, 0x40, 0x80, 0x0,
0x0, 0x1e, 0x27, 0x4b, 0x52, 0x66, 0x3c, 0x0,0x0, 0x4, 0xc, 0x4, 0x8, 0x8, 0x1c, 0x0,
0x0, 0x1e, 0x23, 0xe, 0x30, 0x60, 0x7e, 0x0,0x0, 0x1e, 0x23, 0xe, 0x3, 0x66, 0x3c, 0x0,
0x0, 0x19, 0x31, 0x3f, 0x3, 0x6, 0x4, 0x0,0x0, 0x1f, 0x30, 0x3e, 0x3, 0x42, 0x3c, 0x0,
0x0, 0x1e, 0x31, 0x7c, 0x62, 0x42, 0x3c, 0x0,0x0, 0x3f, 0x3, 0x6, 0xc, 0x10, 0x20, 0x0,
0x0, 0x1e, 0x33, 0x3e, 0x63, 0x46, 0x3c, 0x0,0x0, 0x1e, 0x33, 0x1f, 0x3, 0x46, 0x3c, 0x0,
0x0, 0x0, 0x20, 0x0, 0x0, 0x20, 0x0, 0x0,0x0, 0x0, 0x20, 0x0, 0x0, 0x20, 0x20, 0x40,
0x18, 0x30, 0x60, 0xc0, 0x60, 0x30, 0x18, 0x0,0x0, 0x0, 0xf8, 0x0, 0xf8, 0x0, 0x0, 0x0,
0xc0, 0x60, 0x30, 0x18, 0x30, 0x60, 0xc0, 0x0,0x70, 0x88, 0x8, 0x10, 0x20, 0x0, 0x20, 0x0,
0x70, 0x88, 0x8, 0x68, 0xa8, 0xa8, 0x70, 0x0,
0x0, 0xc, 0x16, 0x22, 0x22, 0x7f, 0x41, 0x0,
0x0, 0x3e, 0x23, 0x7e, 0x61, 0x43, 0x7e, 0x0,
0x0, 0x1e, 0x31, 0x60, 0x40, 0x42, 0x3c, 0x0,
0x0, 0x3e, 0x23, 0x63, 0x42, 0x46, 0x7c, 0x0,
0x0, 0x3f, 0x30, 0x7c, 0x40, 0x40, 0x7e, 0x0,
0x0, 0x3f, 0x20, 0x7c, 0x60, 0x40, 0x40, 0x0,
0x0, 0x1e, 0x31, 0x60, 0x4e, 0x42, 0x3c, 0x0,
0x0, 0x21, 0x21, 0x7f, 0x63, 0x42, 0x42, 0x0,
0x0, 0xc, 0x4, 0x8, 0x8, 0x8, 0x18, 0x0,
0x0, 0x3f, 0x1, 0x1, 0x43, 0x62, 0x3c, 0x0,
0x0, 0x21, 0x26, 0x78, 0x48, 0x46, 0x42, 0x0,
0x0, 0x20, 0x20, 0x60, 0x40, 0x40, 0x7e, 0x0,
0x0, 0x11, 0x13, 0x33, 0x2d, 0x4d, 0x49, 0x0,
0x0, 0x21, 0x31, 0x69, 0x4b, 0x46, 0x42, 0x0,
0x0, 0x1e, 0x23, 0x43, 0x42, 0x46, 0x3c, 0x0,
0x0, 0x3e, 0x23, 0x7e, 0x60, 0x40, 0x40, 0x0,
0x0, 0x1e, 0x23, 0x43, 0x5a, 0x4e, 0x3c, 0x0,
0x0, 0x3e, 0x23, 0x7e, 0x64, 0x42, 0x42, 0x0,
0x0, 0x1e, 0x31, 0x1e, 0x3, 0x42, 0x3c, 0x0,
0x0, 0x7f, 0x8, 0x10, 0x10, 0x10, 0x30, 0x0,
0x0, 0x21, 0x21, 0x41, 0x43, 0x66, 0x3c, 0x0,
0x0, 0x61, 0x23, 0x32, 0x14, 0x1c, 0x18, 0x0,
0x0, 0x49, 0x59, 0x5a, 0x66, 0x64, 0x44, 0x0,
0x0, 0x23, 0x32, 0x1c, 0x66, 0x42, 0x42, 0x0,
0x0, 0x21, 0x11, 0x1a, 0xc, 0x8, 0x18, 0x0,
0x0, 0x3f, 0x6, 0xc, 0x30, 0x60, 0x7e, 0x0,
0x70, 0x40, 0x40, 0x40, 0x40, 0x40, 0x70, 0x0,
0x0, 0x0, 0x80, 0x40, 0x20, 0x10, 0x8, 0x0,
0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x70, 0x0,
0x20, 0x50, 0x88, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xf8, 0x0,
0x40, 0x20, 0x10, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x70, 0x8, 0x78, 0x88, 0x78, 0x0,
0x80, 0x80, 0xb0, 0xc8, 0x88, 0xc8, 0xb0, 0x0,
0x0, 0x0, 0x70, 0x88, 0x80, 0x88, 0x70, 0x0,
0x8, 0x8, 0x68, 0x98, 0x88, 0x98, 0x68, 0x0,
0x0, 0x0, 0x70, 0x88, 0xf8, 0x80, 0x70, 0x0,
0x10, 0x28, 0x20, 0xf8, 0x20, 0x20, 0x20, 0x0,
0x0, 0x0, 0x68, 0x98, 0x98, 0x68, 0x8, 0x70,
0x80, 0x80, 0xf0, 0x88, 0x88, 0x88, 0x88, 0x0,
0x20, 0x0, 0x60, 0x20, 0x20, 0x20, 0x70, 0x0,
0x10, 0x0, 0x30, 0x10, 0x10, 0x10, 0x90, 0x60,
0x40, 0x40, 0x48, 0x50, 0x60, 0x50, 0x48, 0x0,
0x60, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x0,
0x0, 0x0, 0xd0, 0xa8, 0xa8, 0xa8, 0xa8, 0x0,
0x0, 0x0, 0xb0, 0xc8, 0x88, 0x88, 0x88, 0x0,
0x0, 0x0, 0x70, 0x88, 0x88, 0x88, 0x70, 0x0,
0x0, 0x0, 0xb0, 0xc8, 0xc8, 0xb0, 0x80, 0x80,
0x0, 0x0, 0x68, 0x98, 0x98, 0x68, 0x8, 0x8,
0x0, 0x0, 0xb0, 0xc8, 0x80, 0x80, 0x80, 0x0,
0x0, 0x0, 0x78, 0x80, 0xf0, 0x8, 0xf0, 0x0,
0x40, 0x40, 0xf0, 0x40, 0x40, 0x48, 0x30, 0x0,
0x0, 0x0, 0x90, 0x90, 0x90, 0x90, 0x68, 0x0,
0x0, 0x0, 0x88, 0x88, 0x88, 0x50, 0x20, 0x0,
0x0, 0x0, 0x88, 0xa8, 0xa8, 0xa8, 0x50, 0x0,
0x0, 0x0, 0x88, 0x50, 0x20, 0x50, 0x88, 0x0,
0x0, 0x0, 0x88, 0x88, 0x98, 0x68, 0x8, 0x70,
0x0, 0x0, 0xf8, 0x10, 0x20, 0x40, 0xf8, 0x0,
0x18, 0x20, 0x20, 0x40, 0x20, 0x20, 0x18, 0x0,
0x20, 0x20, 0x20, 0x0, 0x20, 0x20, 0x20, 0x0,
0xc0, 0x20, 0x20, 0x10, 0x20, 0x20, 0xc0, 0x0,
0x40, 0xa8, 0x10, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x20, 0x50, 0xf8, 0x0, 0x0, 0x0,
0x70, 0x88, 0x80, 0x80, 0x88, 0x70, 0x20, 0x60,
0x0, 0x0, 0x18, 0x18, 0x3c, 0x3c, 0x24, 0x24,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x7c,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x60,
0x0, 0x0, 0x78, 0x78, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x7c, 0x7c, 0x60, 0x60, 0x60, 0x7c,
0x0, 0x0, 0x7c, 0x7c, 0x60, 0x60, 0x60, 0x7c,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x60, 0x60,
0x0, 0x0, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7e,
0x0, 0x0, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
0x0, 0x0, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6,
0x0, 0x0, 0x66, 0x66, 0x6c, 0x6c, 0x78, 0x78,
0x0, 0x0, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
0x0, 0x0, 0xc3, 0xc7, 0xc7, 0xe7, 0xef, 0xef,
0x0, 0x0, 0x66, 0x66, 0x66, 0x76, 0x76, 0x7e,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x7e, 0x7e, 0x66, 0x66, 0x70, 0x30,
0x0, 0x0, 0x7e, 0x7e, 0x18, 0x18, 0x18, 0x18,
0x0, 0x0, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
0x0, 0x0, 0x46, 0x46, 0x66, 0x66, 0x64, 0x6c,
0x0, 0x0, 0x99, 0x99, 0xd9, 0xdd, 0xdd, 0xdd,
0x0, 0x0, 0x66, 0x66, 0x6c, 0x3c, 0x38, 0x38,
0x0, 0x0, 0x66, 0x66, 0x66, 0x6c, 0x2c, 0x3c,
0x0, 0x0, 0x7e, 0x7e, 0x6, 0xc, 0xc, 0xc,
0x0, 0x0, 0xe, 0xe, 0x1f, 0x1f, 0x1f, 0x1f,
0x0, 0x0, 0x38, 0x3c, 0x3c, 0x7c, 0x7e, 0xfe,
0x0, 0x0, 0x3f, 0xff, 0xff, 0xe0, 0xe0, 0xff,
0x0, 0x0, 0xfe, 0xff, 0xff, 0x7, 0x3, 0x83,
0x0, 0x0, 0x1e, 0x3c, 0x3c, 0xf8, 0xf0, 0xf0,
0x10, 0x20, 0x70, 0x8, 0x78, 0x88, 0x78, 0xff,
0x66, 0x66, 0x66, 0x7e, 0x7e, 0x66, 0x66, 0x0,
0x7c, 0x66, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x60, 0x60, 0x60, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x66, 0x66, 0x66, 0x66, 0x66, 0x7e, 0x78, 0x0,
0x7c, 0x60, 0x60, 0x60, 0x60, 0x7c, 0x7c, 0x0,
0x7c, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x0,
0x6e, 0x6e, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x7e, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x0,
0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0,
0x6, 0x6, 0x66, 0x66, 0x66, 0x7c, 0x7c, 0x0,
0x70, 0x78, 0x78, 0x6c, 0x6c, 0x66, 0x66, 0x0,
0x60, 0x60, 0x60, 0x60, 0x60, 0x7c, 0x7c, 0x0,
0xfb, 0xfb, 0x0, 0x0, 0xd3, 0xc3, 0xc3, 0x0,
0x7e, 0x6e, 0x6e, 0x6e, 0x66, 0x66, 0x66, 0x0,
0x66, 0x66, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x7e, 0x7e, 0x60, 0x60, 0x60, 0x60, 0x60, 0x0,
0x66, 0x66, 0x6e, 0x6e, 0x66, 0x7e, 0x7e, 0x0,
0x7e, 0x78, 0x6c, 0x6c, 0x6e, 0x66, 0x66, 0x0,
0x18, 0xc, 0x6, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0,
0x66, 0x66, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0,
0x2c, 0x3c, 0x3c, 0x38, 0x38, 0x18, 0x18, 0x0,
0xd5, 0xf7, 0x77, 0x77, 0x67, 0x66, 0x66, 0x0,
0x10, 0x38, 0x3c, 0x6c, 0x6c, 0x66, 0x66, 0x0,
0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0,
0x18, 0x18, 0x18, 0x30, 0x30, 0x7e, 0x7e, 0x0,
0x3f, 0x3f, 0x3b, 0x7b, 0x7b, 0x71, 0x71, 0x0,
0xfe, 0xfe, 0xff, 0xef, 0xe7, 0xe7, 0xc7, 0x0,
0xff, 0x7f, 0x0, 0x0, 0xff, 0xff, 0xff, 0x0,
0xc1, 0xe3, 0xe7, 0xe7, 0xef, 0xde, 0x9e, 0x0,
0xe0, 0xf0, 0xf8, 0xf8, 0x3c, 0x3e, 0x1e, 0x0,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xf0, 0xf0, 0xf0, 0xf0, 0xf, 0xf, 0xf, 0xf,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0x3c, 0x3c, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
0xf, 0xf, 0xf, 0xf, 0xf0, 0xf0, 0xf0, 0xf0,
0xfc, 0xfc, 0xfc, 0xfc, 0xfc, 0xfc, 0xfc, 0xfc,
0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x3,
0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f,
0x11, 0x22, 0x44, 0x88, 0x11, 0x22, 0x44, 0x88,
0x88, 0x44, 0x22, 0x11, 0x88, 0x44, 0x22, 0x11,
0xfe, 0x7c, 0x38, 0x10, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0x10, 0x38, 0x7c, 0xfe,
0x80, 0xc0, 0xe0, 0xf0, 0xe0, 0xc0, 0x80, 0xff,
0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x66, 0x66,
0x0, 0x18, 0x18, 0x38, 0x18, 0x18, 0x18, 0x18,
0x0, 0x7e, 0x7e, 0x66, 0x66, 0x6, 0xc, 0x8,
0xf0, 0xf0, 0xf0, 0xf0, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0xf, 0xf, 0xf, 0xf,
0xf, 0xf, 0xf, 0xf, 0xff, 0xff, 0xff, 0xff,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
0x33, 0x33, 0xcc, 0xcc, 0x33, 0x33, 0xcc, 0xcc,
0x0, 0x7e, 0x7e, 0x66, 0x66, 0x66, 0x7e, 0x3c,
0x20, 0x20, 0x70, 0x20, 0x70, 0x20, 0x20, 0xff,
0xff, 0xff, 0xff, 0x50, 0x88, 0xa8, 0x50, 0xff,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
0xff, 0xff, 0x68, 0x90, 0x90, 0x90, 0x68, 0xff,
0x30, 0x48, 0x48, 0x70, 0x48, 0x48, 0x70, 0xc0,
0xf8, 0x88, 0x80, 0x80, 0x80, 0x80, 0x80, 0xff,
0xf8, 0x50, 0x50, 0x50, 0x50, 0x50, 0x98, 0xff,
0xf8, 0x88, 0x40, 0x20, 0x40, 0x88, 0xf8, 0xff,
0xff, 0xff, 0x78, 0x90, 0x90, 0x90, 0x60, 0xff,
0xff, 0x50, 0x50, 0x50, 0x50, 0x68, 0x80, 0x80,
0xff, 0x50, 0xa0, 0x20, 0x20, 0x20, 0x20, 0xff,
0xf8, 0x20, 0x70, 0xa8, 0xa8, 0x70, 0x20, 0xf8,
0x20, 0x50, 0x88, 0xf8, 0x88, 0x50, 0x20, 0xff,
0x70, 0x88, 0x88, 0x88, 0x50, 0x50, 0xd8, 0xff,
0x30, 0x40, 0x40, 0x20, 0x50, 0x50, 0x50, 0x20,
0xff, 0xff, 0xff, 0x50, 0xa8, 0xa8, 0x50, 0xff,
0x8, 0x70, 0xa8, 0xa8, 0xa8, 0x70, 0x80, 0xff,
0x38, 0x40, 0x80, 0xf8, 0x80, 0x40, 0x38, 0xff,
0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0xff,
0x66, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0, 0x0,
0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0, 0x0,
0x18, 0x10, 0x30, 0x60, 0x7e, 0x7e, 0x0, 0x0,
0x18, 0x60, 0x80, 0x60, 0x18, 0xff, 0xf8, 0xff,
0x10, 0x28, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xa0, 0x40,
0xff, 0x20, 0xff, 0xf8, 0xff, 0x20, 0xff, 0xff,
0xff, 0x50, 0xa0, 0xff, 0x50, 0xa0, 0xff, 0xff,
0x66, 0x66, 0x66, 0x66, 0x7e, 0x7e, 0x0, 0x0,
0xff, 0x30, 0x78, 0x78, 0x30, 0xff, 0xff, 0xff,
0xff, 0xff, 0xff, 0xff, 0x30, 0xff, 0xff, 0xff,
0x3e, 0x20, 0x20, 0x20, 0xa0, 0x60, 0x20, 0xff,
0xa0, 0x50, 0x50, 0x50, 0xff, 0xff, 0xff, 0xff,
0x40, 0xa0, 0x20, 0x40, 0xe0, 0xff, 0xff, 0xff,
0xff, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xff,
0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff};

const unsigned char TILESET_COLOR[]={
0xe0, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
0xe0, 0xe6, 0xe6, 0xe6, 0xe6, 0xe6, 0xe6, 0xe6,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0xe0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0xe0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0x40, 0xe0, 0xe0, 0xe0, 0xe0,
0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
0xf6, 0xf6, 0xf6, 0xf6, 0xf6, 0xf6, 0xf6, 0xf6,
0x0, 0xf0, 0xf0, 0xfe, 0xfe, 0xfe, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0x0, 0x50, 0x0, 0x0, 0x0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf0, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0xf0, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf0, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0x40, 0x40, 0xf0, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0xf4, 0xf4, 0xf0, 0xf4, 0xf4, 0x40, 0x40,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0x0, 0xf0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0x0, 0x0, 0xf0, 0x0, 0x0,
0x0, 0x0, 0xf0, 0x0, 0x0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0x0, 0xf0, 0x0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0, 0x0, 0x0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0x0, 0x0, 0x0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0x0, 0x0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0,
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0xf0, 0xf0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0x40, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf0, 0xf0, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0xf4, 0xf4, 0x40, 0x40, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x40, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
0x40, 0x40, 0x40, 0x40, 0xf0, 0xf0, 0xf0, 0xf0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf0, 0xf0, 0xf0, 0xf0, 0x40, 0x40, 0x40, 0x40,
0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0x40, 0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4,
0x40, 0xf4, 0x40, 0xf4, 0x40, 0xf4, 0x40, 0x40,
0x40, 0xf4, 0xf4, 0x40, 0xf4, 0xf4, 0x40, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x0, 0x0,
0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40,
0x40, 0x40, 0x40, 0x40, 0xf4, 0x40, 0x40, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40, 0x40,
0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40, 0x40, 0x40,
0x40, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0xf4, 0x40,
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0};

const unsigned char GUI[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  };

const unsigned char INTRO[]={
0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1,
0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0,
0x0, 0x1, 0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x4, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20, 0x2,0x20, 0x5,0x20,0x20,0x20,0x20,0x20, 0x5, 0xc, 0xc, 0xd,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20, 0x2, 0x3, 0x6, 0x3, 0x3, 0x3, 0x3, 0x3, 0x6, 0xc, 0xc, 0xd, 0xe, 0xf, 0xf, 0xf, 0xf, 0xf,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20, 0x2,0x20, 0x5,0x20, 0x9, 0xa, 0xb,0x20, 0x5, 0xc, 0xc, 0xd,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x5, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x84,0x8f,0x90,0x85,0x20,0x97,0x81,0x92,0x93,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xa4,0xaf,0xb0,0xa5,0x20,0xb7,0xa1,0xb2,0xb3,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x90,0x95,0x93,0x88,0x20,0x93,0x90,0x81,0x83,0x85,0x20,0x94,0x8f,0x20,0x93,0x94,0x81,0x92,0x94,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0xb0,0xb5,0xb3,0xa8,0x20,0xb3,0xb0,0xa1,0xa3,0xa5,0x20,0xb4,0xaf,0x20,0xb3,0xb4,0xa1,0xb2,0xb4,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0xd2,0xd0,0xd2,0xd2,0x20,0x81,0x8e,0x94,0x98,0x89,0x8b,0x8f,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x20,0x20,0x20,0x20,0xf2,0xf0,0xf2,0xf2,0x20,0xa1,0xae,0xb4,0xb8,0xa9,0xab,0xaf,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0,
0x0, 0x1,0x20,0x54,0x48,0x41,0x4e,0x4b,0x53,0x3a,0x41,0x4f,0x52,0x41,0x4e,0x54,0x45,0x2c,0x4e,0x45,0x53,0x54,0x52,0x55,0x4f,0x20,0x26,0x20,0x20,0x20, 0x0, 0x1,
0x1, 0x0, 0x1, 0x0,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x41,0x4c,0x55,0x43,0x41,0x52,0x44,0x58,0x20,0x20,0x20,0x20,0x20,0x20,0x20, 0x1, 0x0, 0x1, 0x0,
0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1,
0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0
};

char _LineLength;  //sprites per line. TMS9918=4; V9938=8

char spr_posX[8];
char spr_posY[8];

char dir=0;
signed char button=0;

const char sprcol[8]={12,2,3,7,6,8,9,14};

const char SPRITE_DATA8x8[]={
60,66,165,129,165,153,66,60,
60,126,219,255,255,219,102,60,
108,254,254,254,124,56,16,0,
16,56,124,254,124,56,16,0,
16,56,84,254,84,16,56,0,
16,56,124,254,254,16,56,0,
0,0,0,24,24,0,0,0,
255,255,255,231,231,255,255,255
};



void main(void)
{
  int s;
  for (s=0; s<8; ++s){
    stock[s] = 0;
  }
  for (s=0; s<8; ++s){
    camello[s] = 15;
  }

  bar = 0;
  dia = 31;
  dinero = 3000;
  deuda = 3000;

  setSprites8x8Patterns();
  initSprites();
 
  COLOR(15,1,1);
  SCREEN(2);
  
  //copy to VRAM tileset,  gfx patterns y coloreh
  CopyToVRAM((uint) TILESET_FONT,BASE12,255*8);
  CopyToVRAM((uint) TILESET_FONT,BASE12+BANK1,255*8);
  CopyToVRAM((uint) TILESET_FONT,BASE12+BANK2,255*8); 
  
  CopyToVRAM((uint) TILESET_COLOR,BASE11,255*8);
  CopyToVRAM((uint) TILESET_COLOR,BASE11+BANK1,255*8);
  CopyToVRAM((uint) TILESET_COLOR,BASE11+BANK2,255*8); 

  CopyToVRAM((uint) INTRO,BASE10,254*8);

  while(1)
    {
    HALT;
    //------------------------- cursor keys
    dir = STICK(CURSORKEYS);
    //VPRINTNUMBER(1,14,1,dir);
    button=STRIG(KEYBOARD_BUTTON);
    //printTrig(button);
    if (button < 0)
    {
    CLS();
    BARRIO();
    } 
  }
}

void BARRIO()
{
  int CURSOR = 0;
  VPRINT (0,0, "Barrio: ");
  VPRINT (8,0, bars[bar]);
  VPRINT (20,0, "Dia: ");
  VPRINTNUMBER(24,0,2, dia);
  VPRINT (0,1, "Dinero: ");
  VPRINTNUMBER (8,1, 5, dinero);
  VPRINT (16,1, "Deuda: ");
  VPRINTNUMBER(22,1,5, deuda);

  VPRINT (4,22, "COMERCIAR");
  VPRINT (15,22,"VIAJAR");
  VPRINT (23,22,"STOCK");
  DRUGS ();
  char cr = 15;
  int b = bar;
  int c;
  PRECIOS(cr,b);
  
 
    while(1)
    {
    HALT;
    //------------------------- cursor keys
    dir = STICK(CURSORKEYS);
    VPRINTNUMBER(1,14,1,dir);
    
    button=STRIG(KEYBOARD_BUTTON);
    printTrig(button);

    PUTSPRITE(0, posX[CURSOR], 174, 8, 7);
    if (dir == 3){
      CURSOR = CURSOR + 1;
        if (CURSOR == 3){
          CURSOR=2;
        }
      VPRINT(10,17,"HAS PULSADO DRCH");
      WAIT(15);
      VPRINT(10,17,"                ");
      VPRINTNUMBER(24,14,1,CURSOR);
      char r;
      r = getR();
      VPRINTNUMBER(0,3,4, r);
      PUTSPRITE(0, posX[CURSOR], 174, 8, 7);
    }
    if (dir == 7){
      CURSOR = CURSOR - 1;
        if (CURSOR < 0){
          CURSOR=0;
        }
      VPRINT(10,17,"HAS PULSADO IZDA");
      WAIT(15);
      VPRINT(10,17,"                ");
      VPRINTNUMBER(24,14,1,CURSOR);
      PUTSPRITE(0, posX[CURSOR], 174, 8, 7);
    }
    if (button < 0 && CURSOR == 2){
      VPRINT(10,17,"HAS PULSADO STOCK");
      WAIT(15);
      VPRINT(10,17,"                 ");
      STOCK();
    }
    if (button < 0 && CURSOR == 1){
      VPRINT(10,17,"HAS PULSADO VIAJAR");
      WAIT(15);
      VPRINT(10,17,"                 ");
      VIAJAR();
    }
     if (button < 0 && CURSOR == 0){
      VPRINT(10,13,"HAS PULSADO COMERCIAR");
      WAIT(15);
      VPRINT(10,13,"                     ");
      COMERCIAR();
    }
  }
}

void COMERCIAR()
{ 
  CURSOR = 0;

  CLS();
  DRUGS();
  printCAMEL();
  char cr = 21;
  int b = bar;
  PRECIOS(cr,b);
  WAIT(15);

  while(1)
    {
    HALT;
    //------------------------- cursor keys
    dir = STICK(CURSORKEYS);
    VPRINTNUMBER(1,14,1,dir);
    
    button=STRIG(KEYBOARD_BUTTON);
    printTrig(button);

    PUTSPRITE(0,20,posY[CURSOR], 8, 7);
    
    if (dir == 3){
      if (stock[CURSOR] > 0)
      {
        stock[CURSOR] = stock[CURSOR]- 1;
        camello[CURSOR] = camello[CURSOR] +1;
        printCAMEL();
      }
      VPRINT(10,17,"HAS PULSADO DRCH");
      WAIT(15);
      VPRINT(10,17,"                ");
    }
    if (dir == 7){
      if (camello[CURSOR] > 0)
      {
        stock[CURSOR] = stock[CURSOR]+ 1;
        camello[CURSOR] = camello[CURSOR] -1;
        printCAMEL();
      }
      VPRINT(10,17,"HAS PULSADO IZDA");
      WAIT(15);
      VPRINT(10,17,"                ");
    }
    if (dir == 1){
      CURSOR = CURSOR - 1;
        if (CURSOR < 0){
          CURSOR = 0;
        }
      VPRINT(10,17,"HAS PULSADO ARRIBA");
      WAIT(15);
      VPRINT(10,17,"                  ");
      VPRINTNUMBER(24,14,1,CURSOR);
      PUTSPRITE(0,20,posY[CURSOR], 8, 7);
    }
    if (dir == 5){
      CURSOR = CURSOR + 1;
        if (CURSOR > 7){
          CURSOR=7;
        }
      VPRINT(10,17,"HAS PULSADO ABAJO");
      WAIT(15);
      VPRINT(10,17,"                 ");
      VPRINTNUMBER(24,14,1,CURSOR);
      PUTSPRITE(0,20,posY[CURSOR], 8, 7);
    }
    if (button < 0)
    {
      VPRINT(10,17,"HAS PULSADO SPACIO");
      WAIT(15);
      VPRINT(10,17,"                  ");
      //bar = CURSOR;
      CLS();
      BARRIO();
    }
  }
}
void STOCK()
{
  CLS();
  DRUGS();
  int c;
  for (c = 0; c < 8; ++c)
  {
  VPRINTNUMBER(15,4+c,2,stock[c]);
  }
  WAIT(15);

  while(1)
    {
    HALT;
    //------------------------- cursor keys
    dir = STICK(CURSORKEYS);
    VPRINTNUMBER(1,14,1,dir);
    
    button=STRIG(KEYBOARD_BUTTON);
    printTrig(button);

    PUTSPRITE(0, posX[CURSOR], 174, 8, 7);
    if (button < 0)
    {
      VPRINT(10,17,"HAS PULSADO SPACIO");
      WAIT(15);
      VPRINT(10,17,"                  ");
      CLS();
      BARRIO();
    }
  }
}

void VIAJAR()
{
  CLS();
  CURSOR = 0;
  int d;
  for (d = 0; d < 6; ++d)
  {
  VPRINT(10,4+d,bars[d]);
  }
  VPRINT(10,10,"Hospital");
  VPRINT(10,11,"Prestamista");
  WAIT(15);

  while(1)
    {
    HALT;
    //------------------------- cursor keys
    dir = STICK(CURSORKEYS);
    VPRINTNUMBER(1,14,1,dir);
    
    button=STRIG(KEYBOARD_BUTTON);
    printTrig(button);

    PUTSPRITE(0,70,posY[CURSOR], 8, 7);
    
    if (dir == 1){
      CURSOR = CURSOR - 1;
        if (CURSOR < 0){
          CURSOR = 0;
        }
      VPRINT(10,17,"HAS PULSADO ARRIBA");
      WAIT(15);
      VPRINT(10,17,"                  ");
      VPRINTNUMBER(24,14,1,CURSOR);
      PUTSPRITE(0,70,posY[CURSOR], 8, 7);
    }
    if (dir == 5){
      CURSOR = CURSOR + 1;
        if (CURSOR > 7){
          CURSOR=7;
        }
      VPRINT(10,17,"HAS PULSADO ABAJO");
      WAIT(15);
      VPRINT(10,17,"                 ");
      VPRINTNUMBER(24,14,1,CURSOR);
      PUTSPRITE(0,70,posY[CURSOR], 8, 7);
    }
    if (button < 0)
    {
      VPRINT(10,17,"HAS PULSADO SPACIO");
      WAIT(15);
      VPRINT(10,17,"                  ");
      char r;
      r = getR();
      if (r<70 && r>0)
      {
        CLS();
        VPRINT(0,0,"NO HA PASADO NADA");
        WAIT(50);
      }
      if (r<89 && r>71)
      {
        CLS();
        VPRINT(0,0,"JONKI!!!!");
        WAIT(50);
      }
      if (r<99 && r>91)
      {
        CLS();
        VPRINT(0,0,"POLICIA!!!!");
        WAIT(50);
      }
      if (r<115 && r>100)
      {
        VPRINT(0,0,"OVERFLOW");
        WAIT(50);
      }
      if (r<128 && r>114)
      {
        VPRINT(0,0,"UNDERFLOW");
        WAIT(50);
      }
      bar = CURSOR;
      dia = dia - 1;
      deuda = (deuda+200);
      CLS();
      BARRIO();
    }
  }
}
void DRUGS(){
  int d;
  for (d = 0; d < 8; ++d){
  VPRINT(4,4+d,drugs[d]);
  }
}

void PRECIOS(char column, int barrio){
  int c;
  for (c = 0; c < 8; ++c)
  {
  precioTEMP[c] = disp[barrio][c];
  }
  for (c = 0; c < 8; ++c)
  {
    char r;
    r = getR();
    if (r<64)
    {
    precioBARRIO[c] = precioTEMP[c] + precioVAR[c];
    }
    if (r>64)
    {
    precioBARRIO[c] = precioTEMP[c] - precioVAR[c];  
    }
  }
  for (c = 0; c < 8; ++c)
  {
  VPRINTNUMBER(column,4+c,5,precioBARRIO[c]);
  }
}
void COST(char column, int barrio){
  int c;
  for (c = 0; c < 8; ++c)
  {
  VPRINTNUMBER(column,4+c,5,disp[barrio][c]);
  }
}

void printCAMEL()
{
  int c;
  for (c = 0; c < 8; ++c)
  {
  VPRINTNUMBER(15,4+c,2,stock[c]);
  }
  for (c = 0; c < 8; ++c)
  {
  VPRINTNUMBER(18,4+c,2,camello[c]);
  }
  WAIT(15);
}


void LOCATE(char x, char y)
{
x;y;
__asm
  push IX
  ld   IX,#0
  add  IX,SP

  ld   A,4(IX) ;x
  inc  A       ;incrementa las posiciones para que se situen correctamente en la pantalla
  ld   H,A
  ld   A,5(IX) ;y
  inc  A
  ld   L,A

  call POSIT

  pop  IX
__endasm;

}

void WAIT(uint cicles)
{
  uint i;
  for(i=0;i<cicles;i++) HALT;
}

char PEEK(uint address)
{
address;
__asm
  push IX
  ld   IX,#0
  add  IX,SP

  ld   L,4(ix)
  ld   H,5(ix)
  ld   A,(hl)

  ld   L,A

  pop  IX
__endasm;
}

void POKE(uint address, char value)
{
address;value;
__asm
  push IX
  ld   IX,#0
  add  IX,SP

  ld   L,4(ix)
  ld   H,5(ix)
  ld   A,6(ix)
  ld   (HL),A

  pop  IX
__endasm;
}

void CLS()
{
  FillVRAM(BASE10, 0x300, 32);
}

void VPOKEARRAY(uint vaddr, char* text)
{
  while(*(text)) VPOKE(vaddr++,*(text++));
}

void VPRINTNUMBER(char column, char line, char pLength, uint pNumber)
{
  uint vaddr = BASE10 + (line*32) + column // calcula la posicion en la VRAM...
                 + pLength - 1; // ...empezando por el dígito más a la derecha
  char length = pLength;
  uint number = pNumber;
  
  // Mientras queden dígitos por pintar...
  while (length) {
  
    // Pinta un dígito
    uint digit = number % 10; // Calcula el último digito (resto de la división entre 10)
    char digitAscii = '0' + ((char) digit); // Convierte el dígito en su código ASCII de número
    VPOKE(vaddr, digitAscii); // Pinta el dígito
    
    // Se mueve al siguiente dígito
    length--; // Descuenta el dígito que acabamos de pintar
    vaddr--; // El siguiente dígito se pintará un caracter más hacia la izquierda
    number = number / 10; // Divide entre 10 para "avanzar" en el número
 }
}

void printTrig(signed char value)
{
  if(value<0) VPRINT(0,15,"-1");
  else VPRINT(0,15," 0");
}

void setSprites8x8Patterns()
{
  HALT;
  CopyToVRAM((uint) SPRITE_DATA8x8,BASE14,8*8);
}

void initSprites()
{
  char X=0,Y=3;
  char i=0;
  
  for(i=0;i<8;i++)
  {
    spr_posX[i]=X*32;
    spr_posY[i]=Y*32;
    X++;
    if(X==_LineLength)
    {
      X=0;
      Y++;
    }
  }
}

char getR()
{
__asm

  ld   A,R  
  ld   L,A ;return L
   
__endasm;
}




